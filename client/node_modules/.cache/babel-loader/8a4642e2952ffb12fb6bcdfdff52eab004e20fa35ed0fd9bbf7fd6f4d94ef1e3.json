{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bhanu\\\\Desktop\\\\mern-ai-school-management\\\\client\\\\src\\\\components\\\\LiveClass\\\\TeacherLiveClass.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from \"react\";\nimport Navbar from \"../Layout/Navbar\";\nimport socket from \"../../socket\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TeacherLiveClass() {\n  _s();\n  const videoRef = useRef(null);\n  const peerRef = useRef(null);\n  const streamRef = useRef(null);\n  useEffect(() => {\n    socket.emit(\"join-class\", \"live-class\");\n    socket.on(\"answer\", async answer => {\n      await peerRef.current.setRemoteDescription(answer);\n    });\n    socket.on(\"ice-candidate\", candidate => {\n      peerRef.current.addIceCandidate(candidate);\n    });\n  }, []);\n  const startClass = async () => {\n    streamRef.current = await navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    });\n    videoRef.current.srcObject = streamRef.current;\n    videoRef.current.muted = true;\n    await videoRef.current.play();\n    peerRef.current = new RTCPeerConnection();\n    streamRef.current.getTracks().forEach(track => peerRef.current.addTrack(track, streamRef.current));\n    peerRef.current.onicecandidate = e => {\n      if (e.candidate) {\n        socket.emit(\"ice-candidate\", {\n          classId: \"live-class\",\n          candidate: e.candidate\n        });\n      }\n    };\n    const offer = await peerRef.current.createOffer();\n    await peerRef.current.setLocalDescription(offer);\n    socket.emit(\"offer\", {\n      classId: \"live-class\",\n      offer\n    });\n  };\n  const stopClass = () => {\n    streamRef.current.getTracks().forEach(t => t.stop());\n    peerRef.current.close();\n    videoRef.current.srcObject = null;\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: \"center\",\n        padding: 30\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83C\\uDFA5 Teacher Live Class\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        style: {\n          width: \"70%\",\n          background: \"#000\"\n        },\n        autoPlay: true,\n        playsInline: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"primary-btn\",\n        onClick: startClass,\n        children: \"\\u25B6 Start Class\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"danger-btn\",\n        onClick: stopClass,\n        children: \"\\u26D4 End Class\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(TeacherLiveClass, \"8VvbBK4X68Xc1qR9DF95SJDYDjg=\");\n_c = TeacherLiveClass;\nvar _c;\n$RefreshReg$(_c, \"TeacherLiveClass\");","map":{"version":3,"names":["React","useEffect","useRef","Navbar","socket","jsxDEV","_jsxDEV","Fragment","_Fragment","TeacherLiveClass","_s","videoRef","peerRef","streamRef","emit","on","answer","current","setRemoteDescription","candidate","addIceCandidate","startClass","navigator","mediaDevices","getUserMedia","video","audio","srcObject","muted","play","RTCPeerConnection","getTracks","forEach","track","addTrack","onicecandidate","e","classId","offer","createOffer","setLocalDescription","stopClass","t","stop","close","children","fileName","_jsxFileName","lineNumber","columnNumber","style","textAlign","padding","ref","width","background","autoPlay","playsInline","className","onClick","_c","$RefreshReg$"],"sources":["C:/Users/bhanu/Desktop/mern-ai-school-management/client/src/components/LiveClass/TeacherLiveClass.jsx"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport Navbar from \"../Layout/Navbar\";\r\nimport socket from \"../../socket\";\r\n\r\nexport default function TeacherLiveClass() {\r\n  const videoRef = useRef(null);\r\n  const peerRef = useRef(null);\r\n  const streamRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    socket.emit(\"join-class\", \"live-class\");\r\n\r\n    socket.on(\"answer\", async (answer) => {\r\n      await peerRef.current.setRemoteDescription(answer);\r\n    });\r\n\r\n    socket.on(\"ice-candidate\", (candidate) => {\r\n      peerRef.current.addIceCandidate(candidate);\r\n    });\r\n  }, []);\r\n\r\n  const startClass = async () => {\r\n    streamRef.current = await navigator.mediaDevices.getUserMedia({\r\n      video: true,\r\n      audio: true\r\n    });\r\n\r\n    videoRef.current.srcObject = streamRef.current;\r\n    videoRef.current.muted = true;\r\n    await videoRef.current.play();\r\n\r\n    peerRef.current = new RTCPeerConnection();\r\n\r\n    streamRef.current.getTracks().forEach(track =>\r\n      peerRef.current.addTrack(track, streamRef.current)\r\n    );\r\n\r\n    peerRef.current.onicecandidate = (e) => {\r\n      if (e.candidate) {\r\n        socket.emit(\"ice-candidate\", {\r\n          classId: \"live-class\",\r\n          candidate: e.candidate\r\n        });\r\n      }\r\n    };\r\n\r\n    const offer = await peerRef.current.createOffer();\r\n    await peerRef.current.setLocalDescription(offer);\r\n\r\n    socket.emit(\"offer\", {\r\n      classId: \"live-class\",\r\n      offer\r\n    });\r\n  };\r\n\r\n  const stopClass = () => {\r\n    streamRef.current.getTracks().forEach(t => t.stop());\r\n    peerRef.current.close();\r\n    videoRef.current.srcObject = null;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <div style={{ textAlign: \"center\", padding: 30 }}>\r\n        <h2>ðŸŽ¥ Teacher Live Class</h2>\r\n\r\n        <video\r\n          ref={videoRef}\r\n          style={{ width: \"70%\", background: \"#000\" }}\r\n          autoPlay\r\n          playsInline\r\n        />\r\n\r\n        <br /><br />\r\n\r\n        <button className=\"primary-btn\" onClick={startClass}>\r\n          â–¶ Start Class\r\n        </button>\r\n\r\n        <button className=\"danger-btn\" onClick={stopClass}>\r\n          â›” End Class\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}